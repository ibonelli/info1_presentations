<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Info1 - Libreria OpenCV</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Ignacio Bonelli">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>

<!-- SLIDES HERE -->
<section>
<h1>OpenCV</h1>
</section>

<section>
<h2>OpenCV</h2>
<ul>
<li>Biblioteca open source para C/C++ para procesamiento de imagenes y vision computarizada, desarrollada inicialmente por Intel.</li>
<li>Disponible en Linux, Mac, y Windows</li>
<li>Tiene estructuras básicas de datos para operaciones con matrices y procesamiento de imagenes.</li>
<li>Permite visualizar datos muy sencillamente y extraer informacion de imagenes y videos.</li>
<li>Tiene funciones de captura y presentacion de imagenes.</li>
</ul>
</section>

<section>
<h2>Opencv se compone de 4 Modulos</h2>
<ul>
<li><b style="color:cyan;">cv</b>: Contiene las Funciones principales de la biblioteca</li>
<li><b style="color:cyan;">cvaux</b>: Contiene las Funciones Auxiliares (experimental)</li>
<li><b style="color:cyan;">cxcore</b>: Contiene las Estructuras de Datos y Funciones de soporte para Algebra lineal</li>
<li><b style="color:cyan;">highgui</b>: Funciones para manejo de la GUI</li>
</ul>
</section>

<section>
<h2>Instalación Debian y compilación</h2>
<ul>
<li style="width:850px;">Instalando:
<pre><code data-trim style="font-size:25px; margin-top:20px; width:850px;" class="bash">
apt-get install libopencv-dev opencv-doc
apt-get install libopencv-core2.4 libopencv-core-dev
apt-get install libopencv-highgui2.4 libopencv-highgui-dev
</code></pre>
</li>
<li>Como compilar:
<pre><code data-trim style="font-size:25px; margin-top:20px;" class="bash">
pkg-config --cflags --libs opencv
</code></pre>
<ul style="font-size:80%; font-family:monospace;">
<li>pkg-config --list-all<ul>
<li>| grep allegro</li>
<li>| grep opencv</li>
</ul>
</li>
</ul>
</li>
<br/>
<li style="width:800px;">Compilando:
<pre><code data-trim style="font-size:25px; margin-top:20px; width:800px;" class="bash">
gcc -oej1 ej1-jpg.c `pkg-config --cflags --libs opencv`
</code></pre>
</li>
</ul>
</section>

<section>
<h2>Nombres de funciones y datos</h2>
<ul style="font-size:80%;">
<li>Convenciones para los nombres de las Funciones
<ul style="font-size:80%;">
<li><b style="color:cyan;">cvActionTargetMod (...)</b><ul>
<li><b style="color:cyan;">Action</b>: Funcion core. Ej: set, create.</li>
<li><b style="color:cyan;">Target</b>: Elemento destino de la Accion. Ej: Contorno, polígono.</li>
<li><b style="color:cyan;">Mod</b>: Modificadores opcionales. Ej: Tipo de argumento.</li>
</ul>
</li>
</ul>
</li>
<li>Matrix data types
<ul style="font-size:80%;">
<li>CV &lt;bit depth&gt;(S|U|F)C&lt;número de canales&gt;</li>
<li><b style="color:cyan;">S</b>: Entero Signado, <b style="color:cyan;">U</b>: Entero no Signado, <b style="color:cyan;">F</b>: Float<ul>
<li><b>Ej:</b> <b style="color:cyan;">CV 8UC1</b> : matriz de un canal de 8 bits no signados,<br/>
<b style="color:cyan;">CV 32FC2</b>: matriz de dos canales de 32 bits punto flotante.</li>
</ul>
</li>
</ul>
</li>
<li>Tipos de datos de imagenes
<ul style="font-size:80%;">
<li>IPL DEPTH &lt;bit depth&gt;(S|U|F)<ul>
<li><b>Ej:</b> <b style="color:cyan;">IPL DEPTH 8U</b> : imagen de 8 bits no signados.<br/>
<b style="color:cyan;">IPL DEPTH 32F</b>: imagen de 32 bits punto flotante.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>

<section>
<h2>Documentación</h2>
<br/>
<ul>
<li><a href="http://docs.opencv.org/">http://docs.opencv.org/</a></li>
<li><a href="/usr/share/doc/opencv-doc/">/usr/share/doc/opencv-doc/</a></li>
<li><a href="http://docs.opencv.org/opencv2refman.pdf">http://docs.opencv.org/opencv2refman.pdf</a></li>
</ul>
</li>
</ul>
</section>

<section>
<h2>Ejercicio1</h2>
<h3>ej1b-bmp.c y ej1a-jpg.c</h3>
<br/>
<p>Estos ejemplos abren un archivo BMP uno (sin compresion)<br/> y JPG el otro (comprimido)</p>
<br/>
<div style="width:900px;">
<pre><code data-trim style="font-size:25px; margin-top:20px; width:900px;" class="bash">
gcc -oej1a ej1a-bmp.c `pkg-config --cflags --libs opencv`
gcc -oej1b ej1a-jpg.c `pkg-config --cflags --libs opencv`
</code></pre>
</div>
<br/>
<p><a href="./files/clase16/OpenCV_Codigo.zip">Bajar el archivo con los códigos de ejemplo que veremos.</a></p>
</section>

<section>
<h2>Funciones Básicas</h2>
<p>Carga de una imagen</p>
<pre style="width:650px;"><code data-trim style="font-size:25px; margin-top:20px; width:650px;" class="cpp">
IplImage *image = cvLoadImage("lenna.jpeg");
</code></pre>
<p>Crear y Ubicar una ventana</p>
<pre style="width:700px;"><code data-trim style="font-size:25px; margin-top:20px; width:700px;" class="cpp">
cvNamedWindow ("ejemplo1", CV_WINDOW_AUTOSIZE);
// Desde borde superior izquierdo
cvMoveWindow ("ejemplo1", 100, 100);
</code></pre>
<p>Mostrar la imagen en la ventana creada</p>
<pre style="width:450px;"><code data-trim style="font-size:25px; margin-top:20px; width:450px;" class="cpp">
cvShowImage("ejemplo1", image);
</code></pre>
<p>Liberar recursos</p>
<pre style="width:350px;"><code data-trim style="font-size:25px; margin-top:20px; width:350px;" class="cpp">
cvReleaseImage(&amp;image);
</code></pre>
<br/>
<p>Recordar convención de nombres: <span style="font-size:80%; font-family:monospace;">prefijo<span style="color:cyan;">Acción</span>Destino</span></p>
</section>

<section>
<h2>La estructura IplImage</h2>
<ul class="col" style="width:380px; display:inline-block; vertical-align:top;">
<pre style="width:380px;"><code data-trim style="font-size:25px; margin-top:20px; width:380px;" class="cpp">
typedef struct _IplImage {
    int nSize;
    int ID;
    int nChannels;
    int alphaChannel;
    int depth;
    char colorModel[4];
    char channelSeq[4];
    int dataOrder;
    int origin;
    int align;
    int width;
    int height;
    // sigue...
</code></pre>
</ul>
<ul class="col" style="width:490px; display:inline-block; vertical-align:top;">
<br/><br/><br/><br/><br/>
<pre style="width:490px;"><code style="font-size:25px; margin-top:20px; width:490px;" class="cpp">
    struct _IplROI *roi;
    struct _IplImage *maskROI;
    void *imageId;
    struct _IplTileInfo *tileInfo;
    int imageSize;
    char *imageData;
    int widthStep;
    int BorderMode[4];
    int BorderConst[4];
    char *imageDataOrigin;
    } IplImage;
</code></pre>
</ul>
</section>

<section>
<h2>La estructura IplImage</h2>
<ul>
<li><span style="font-family:monospace;">char *imageData;</span><ul>
<li>La imagen en memoria</li>
<li>Cada elemento un pixel</li>
<li>Un byte o 4 dependiendo si usamos color o no</li>
</ul>
</li>
<li><span style="font-family:monospace;">int nChannels;</span><ul>
<li>1 si es matiz de grises</li>
<li>RGB: 3 canales mas un 4to para canal alpha<ul>
<li>(o transparencias como en PNG o GIF)</li>
</ul>
</li>
</ul>
</li>
<li><span style="font-family:monospace;">int width; int height;</span><ul>
<li>Lo que uno se imagina ;)</li>
</ul>
</li>
<li><span style="font-family:monospace;">int widthStep;</span><ul>
<li>Cuanto avanzar para pasar a la siguiente linea.</li>
</ul>
</li>
</ul>
</section>

<section>
<h2>Manejando grises o color</h2>
<br/>
<ul>
<li>8 bit depth: Escala de grises</li>
<li>Color 32bits:
	<ul>
		<li>R: Rojo (8bits)</li>
		<li>G: Verde (8bits)</li>
		<li>B: Azul (8bits)</li>
		<li>Transparente (8bits)</li>
	</ul>
</li>
</ul>
</section>

<section>
<h2>Invirtiendo una imagen</h2>
<br/>
<p>ej3a-invert.c : Invirtiendo imagen de un canal (matiz de grises)</p>
<div style="width:900px;">
<pre><code data-trim style="font-size:25px; margin-top:20px; width:900px;" class="bash">
gcc -oej3a ej3a-invert.c `pkg-config --cflags --libs opencv`
</code></pre>
</div>
<br/>
<p>ej3b-invert.c : Invirtiendo una imagen color</p>
<div style="width:900px;">
<pre><code data-trim style="font-size:25px; margin-top:20px; width:900px;" class="bash">
gcc -oej3b ej3b-invert.c `pkg-config --cflags --libs opencv`
</code></pre>
</div>
</section>

<section>
<h1>Llegamos aca...</h1>
</section>

<section>
<h2>La estructura IplImage</h2>
<ul>
<li>Cualquier imagen va a parar a una estructura de este tipo.</li>
<li>OpenCV permite visualizar videos desde dos fuentes de informacion:<ul>
<li>Camara web conectada a la PC</li>
<li>Archivo avi</li>
</ul>
</li>
<li>La imagen de video se compone de cuadros de n*m pixeles</li>
<li>Cada cuadro se carga en una estructura IplImage</li>
</ul>
</section>

<section>
<h2>Usando la camara de video</h2>
<br/>
<p>ej3a-invert.c : Invirtiendo imagen de un canal (matiz de grises)</p>
<div style="width:900px;">
<pre><code data-trim style="font-size:25px; margin-top:20px; width:900px;" class="bash">
gcc -oej2 ej2-webcam.c `pkg-config --cflags --libs opencv`
</code></pre>
</div>
</section>

</section>
<section data-background="#007777">

<section>
<h1>Procesamiento de imagenes</h1>
</section>

<section>
<h2>Algunos algoritmos</h2>
<br/>
<ul class="col" style="display:inline-block; vertical-align:top;">
	<ul>
		<li>Resize</li>
		<li>Blur<ul>
			<li>Simple</li>
			<li>Por radio</li>
			</ul>
		</li>
		<li>Bordes<ul>
			<li>Sencillo</li>
			<li>Canny</li>
			</ul>
		</li>
	</ul>
</ul>
<ul class="col" style="display:inline-block; vertical-align:top;">
	<p> </p>
</ul>
<ul class="col" style="display:inline-block; vertical-align:top;">
	<img src="files/clase16/OpenCV_img0.png"/>
</ul>
</section>

<section>
<h2>Ejemplos</h2>
<br/>
<ul class="col" style="display:inline-block; vertical-align:top;">
	<ul>
		<li>Base de trabajo<ul>
			<li>ej5-imgproc.h</li>
			<li>ej5-imgproc.c</li>
			</ul>
		</li>
	</ul>
</ul>
<ul class="col" style="display:inline-block; vertical-align:top;">
	<ul>
		<li>Ejemplos<ol>
			<li>ej5b-resize.c</li>
			<li>ej5c-blur.c</li>
			<li>ej5c-blur2.c</li>
			<li>ej5a-bordes.c</li>
			<li>ej4a-canny.c</li>
			<li>ej4b-canny.c</li>
			</ol>
		</li>
	</ul>
</ul>
<br/><br/>
<p>Para cada ejemplo crearemos un archivo.c con el código de procesar_imagen()</p>
</section>

<section>
<h2>Algoritmo Resize y Blur</h2>
<br/>
<ul>
	<li>Resize<ul>
		<li>Voy recorriendo y sacando el promedio de a 4 pixels</li>
		<li>Pnuevo = (Pi + Px + Py + Pz ) / 4</li>
		</ul>
	</li>
	<br/>
	<li>Blur<ul>
		<li>Voy recorriendo y sacando el promedio de los pixeles de alrededor.</li>
		<li>Version sencilla 3x3. Version mejorada recorro el entorno con un radio de acción.</li>
		</ul>
	</li>
</ul>
</section>

<section>
<img src="files/clase16/OpenCV_img5b.jpg"/>
</section>
<!-- SLIDES HERE -->

				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
